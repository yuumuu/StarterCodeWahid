window.CoreUI=(function(){const Skeleton={text(l=1){let h="";for(let i=0;i<l;i++)h+=`<div class="skeleton skeleton-text" style="width:${80+Math.random()*20}%"></div>`;return h},avatar(){return`<div class="skeleton skeleton-avatar"></div>`},grid(c=3,col=3){let h=`<div class="grid grid-cols-1 md:grid-cols-${col} gap-6">`;for(let i=0;i<c;i++)h+=`<div class="bg-white p-6 rounded-lg">${this.avatar()}<div class="mt-4">${this.text(2)}</div></div>`;h+=`</div>`;return h}};const Cache={set(k,v,t=30){try{const i={value:v,expires:Date.now()+t*60*1000};localStorage.setItem(`sc_cache_${k}`,JSON.stringify(i))}catch(e){}},get(k){try{const r=localStorage.getItem(`sc_cache_${k}`);if(!r)return null;const i=JSON.parse(r);if(i&&i.expires>Date.now())return i.value;localStorage.removeItem(`sc_cache_${k}`)}catch(e){}return null},clear(){try{Object.keys(localStorage).forEach(k=>{if(k.startsWith("sc_cache_"))localStorage.removeItem(k)})}catch(e){}}};const connection=navigator.connection||navigator.mozConnection||navigator.webkitConnection;const isSlow=!!(connection&&(connection.effectiveType==="3g"||(connection.downlink&&connection.downlink<0.8)));function installRenderOverride(F){if(!F||!F.render||F.__sc_render_installed)return;F.__sc_render_installed=true;const o=F.render.bind(F);F.render=async function(cp,tid){const t=document.getElementById(tid);if(t)try{t.innerHTML=Skeleton.grid(2,2)}catch(e){}const r=await o(cp,tid);if(window.Alpine)await new Promise(res=>requestAnimationFrame(()=>setTimeout(res,100)));if(window.ScrollObserver&&typeof window.ScrollObserver.reinit==="function")window.ScrollObserver.reinit();return r}}if(window.Framework)installRenderOverride(window.Framework);else{let c=0;const m=20;const i=setInterval(()=>{c++;if(window.Framework){try{installRenderOverride(window.Framework)}catch(e){}clearInterval(i)}else if(c>=m)clearInterval(i)},250)}function morph(t,h){if(!t)return Promise.resolve();const tp=document.createElement("template");tp.innerHTML=h;const s=Array.from(tp.content.querySelectorAll("script"));s.forEach(x=>x.parentNode&&x.parentNode.removeChild(x));try{if(window.Alpine&&typeof Alpine.morph==="function")Alpine.morph(t,tp.innerHTML);else if(window.morphdom&&typeof window.morphdom==="function")window.morphdom(t,tp.innerHTML);else t.innerHTML=tp.innerHTML}catch(e){t.innerHTML=tp.innerHTML}s.forEach(os=>{const ns=document.createElement("script");Array.from(os.attributes).forEach(a=>ns.setAttribute(a.name,a.value));ns.appendChild(document.createTextNode(os.innerHTML||""));document.head.appendChild(ns);document.head.removeChild(ns)});return Promise.resolve()}return{Skeleton,Cache,isSlow,morph}})();window.Skeleton=window.CoreUI.Skeleton;window.CacheManager=window.CoreUI.Cache;
