window.Router={routes:[],init(t){this.routes=t,window.addEventListener("hashchange",()=>this.handleHashChange()),window.addEventListener("load",()=>this.handleHashChange()),this.handleHashChange()},async handleHashChange(){let t=window.location.hash.slice(1)||"/",e="/",o=null;if(t.startsWith("/")){const a=t.split("#");e=a[0],o=a[1]||null}else if(t)return o=t,this.scrollToAnchor(o),void this.updateActiveAnchors(o);const[a,n]=e.split("?");let s=this.routes.find(t=>t.path===a),i={};if(!s)for(const t of this.routes)if(t.path.includes(":")){const e="^"+t.path.replace(/:[a-zA-Z0-9_]+/g,"([^/]+)")+"$",o=new RegExp(e),n=a.match(o);if(n){s=t;const e=(t.path.match(/:[a-zA-Z0-9_]+/g)||[]).map(t=>t.slice(1));n.slice(1).forEach((t,o)=>{i[e[o]]=t});break}}if(this.params=i,this.currentPath=a,window.Store&&window.Store.set("params",i),s||(s=this.routes.find(t=>"/404"===t.path)||{component:"app/pages/404.html"}),s.beforeEnter){if(!await s.beforeEnter())return}window.Framework&&window.Framework.cache&&delete window.Framework.cache[s.component],await Framework.render(s.component,"router-view"),this.updateActiveLinks(a),o&&setTimeout(()=>this.scrollToAnchor(o),100),window.dispatchEvent(new CustomEvent("route:changed",{detail:{path:a,params:i}}))},updateActiveLinks(t){document.querySelectorAll('[href^="#/"]').forEach(e=>{const o=e.getAttribute("href").slice(1).split("#")[0],a=t===o||"/"!==o&&t.startsWith(o+"/");e.classList.toggle("nav-link-active",a),e.classList.toggle("active-link",a)})},updateActiveAnchors(t){document.querySelectorAll('[href^="#"]:not([href^="#/"])').forEach(e=>{const o=e.getAttribute("href");if(!o||"#"===o)return;const a=o.slice(1)===t;e.classList.toggle("nav-anchor-active",a)})},scrollToAnchor(t){const e=document.getElementById(t);e&&(e.scrollIntoView({behavior:"smooth",block:"start"}),this.updateActiveAnchors(t))},navigate(t){window.location.hash=t}};