(async function(){const l=document.getElementById("docs-loading"),e=document.getElementById("docs-error"),c=document.getElementById("docs-content");function showError(m){l.classList.add("hidden");e.classList.remove("hidden");e.textContent=m}try{if(!window.marked)await new Promise((r,j)=>{const s=document.createElement("script");s.src="https://cdn.jsdelivr.net/npm/marked/marked.min.js";s.onload=r;s.onerror=j;document.head.appendChild(s)});const res=await fetch("README.md");if(!res.ok)throw new Error("Failed to fetch README.md ("+res.status+")");const md=await res.text();const raw=(window.marked&&window.marked.parse)?window.marked.parse(md):window.marked(md);const safe=DOMPurify.sanitize(raw);const w=document.createElement("div");w.className="docs-wrap";const sb=document.createElement("aside");sb.className="docs-sidebar";const tt=document.createElement("h4");tt.textContent="On this page";const tn=document.createElement("nav");tn.className="docs-toc";tn.id="docs-toc";sb.appendChild(tt);sb.appendChild(tn);const m=document.createElement("main");m.className="docs-content";const ci=document.createElement("div");ci.className="docs-main-container";ci.innerHTML=safe;m.appendChild(ci);const mt=document.createElement("div");mt.className="docs-mobile-toolbar";mt.innerHTML='<div style="font-weight:700;color:#0f172a">On this page</div><button class="docs-toggle-btn" aria-expanded="false" style="background:transparent;border:1px solid rgba(15,23,42,0.06);padding:.35rem .6rem;border-radius:6px;cursor:pointer">Show</button>';w.appendChild(mt);w.appendChild(sb);w.appendChild(m);c.innerHTML="";c.appendChild(w);l.classList.add("hidden");c.classList.remove("hidden");const h=m.querySelectorAll("h1, h2, h3");h.forEach(x=>{if(!x.id)x.id=x.textContent.trim().toLowerCase().replace(/[^a-z0-9]+/g,"-")});const ru=document.createElement("ul");ru.style.listStyle="none";ru.style.padding="0";ru.style.margin="0";let lh1=null,lh2=null;h.forEach(x=>{const lv=parseInt(x.tagName.substr(1),10);const lk=document.createElement("a");lk.href="#"+x.id;lk.textContent=x.textContent;lk.className="toc-link";lk.addEventListener("click",function(ev){ev.preventDefault();document.getElementById(x.id).scrollIntoView({behavior:"smooth",block:"start"});setActiveTOCLink(lk);if(window.innerWidth<=900){sb.classList.remove("open");tb.textContent="Show";tb.setAttribute("aria-expanded","false")}});const li=document.createElement("li");li.style.marginBottom="6px";if(lv===1){li.appendChild(lk);const cu=document.createElement("ul");cu.style.listStyle="none";cu.style.padding="0 0 0 6px";cu.style.margin="6px 0 0 0";cu.className="children";li.appendChild(cu);ru.appendChild(li);lh1=li;lh2=null}else if(lv===2){const pu=(lh1&&lh1.querySelector(".children"))||ru;const ct=document.createElement("div");ct.style.display="flex";ct.style.alignItems="center";ct.style.justifyContent="space-between";const lf=document.createElement("div");lk.classList.add("toc-h2");lf.appendChild(lk);const tg=document.createElement("button");tg.type="button";tg.className="toc-toggle";tg.textContent="▸";tg.style.border="none";tg.style.background="transparent";tg.style.cursor="pointer";tg.style.padding="0 6px";tg.style.color="var(--muted)";tg.style.display="none";const cu=document.createElement("ul");cu.style.listStyle="none";cu.style.padding="0 0 0 8px";cu.style.margin="4px 0 0 0";cu.className="children";cu.style.display="none";ct.appendChild(lf);ct.appendChild(tg);li.appendChild(ct);li.appendChild(cu);pu.appendChild(li);lh2=li;tg.addEventListener("click",()=>{const o=cu.style.display!=="none";cu.style.display=o?"none":"block";tg.textContent=o?"▸":"▾"})}else if(lv===3){const pu=(lh2&&lh2.querySelector(".children"))||(lh1&&lh1.querySelector(".children"))||ru;if(lh2&&pu===lh2.querySelector(".children")){const t=lh2.querySelector(".toc-toggle");if(t)t.style.display="block"}const il=document.createElement("li");il.style.marginBottom="3px";lk.classList.add("toc-h3");il.appendChild(lk);pu.appendChild(il)}});tn.appendChild(ru);function setActiveTOCLink(lk){tn.querySelectorAll("a").forEach(x=>x.classList.remove("active"));if(lk)lk.classList.add("active")}const fl=tn.querySelector("a");if(fl)setActiveTOCLink(fl);const tb=mt.querySelector(".docs-toggle-btn");tb.addEventListener("click",()=>{const io=sb.classList.toggle("open");tb.textContent=io?"Hide":"Show";tb.setAttribute("aria-expanded",String(io));if(io)sb.scrollIntoView({behavior:"smooth",block:"start"})});let tk=false;window.addEventListener("scroll",()=>{if(!tk){window.requestAnimationFrame(()=>{let cu=null;h.forEach(x=>{if(x.getBoundingClientRect().top<=120)cu=x});if(cu){const lk=tn.querySelector('a[href="#'+cu.id+'"]');if(lk)setActiveTOCLink(lk)}tk=false});tk=true}});m.querySelectorAll("a").forEach(a=>{const hr=a.getAttribute("href")||"";if(hr.startsWith("http"))a.setAttribute("target","_blank")})}catch(ex){console.error("[Docs] load failed",ex);showError("Could not load documentation: "+(ex&&ex.message?ex.message:String(ex)))}})();
